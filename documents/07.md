## 7.0 개요

- 일반적인 HTML에서 입력 요소를 다룰 때에는 페이지의 DOM이 해당 요소의 값을 DOM 자체가 관리
- React는 컴포넌트가 갖는 상태나 전달받은 속성으로부터 뷰를 표현하기 때문에 뷰와 데이터를 관리하는 영역이 분리되어 있음
- React는 초기 상태를 정의하고 입력이나 변화에 따라 상태를 변경하면서 뷰와 동기화하는 과정이 중요햠

    - `render()` 메서드가 현재 상태를 잘 반영하도록 설계
    - 사용자 입력에 의해 상태가 적절하게 바뀔 수 있도록 신경써야 함

- 상태와 뷰를 동기화하는 과정이 단방향으로 이뤄지는데, 단방향이라는 것이 코드가 적은 것을 의미하는 것은 아니나 실수할 수 있는 부분을 줄여주기 때문에 코드가 단순해짐
- 사용자가 입력할 수 있는 폼이나 입력 요소가 있는 제어 컴포넌트와 그렇지 않은 비제어 컴포넌트가 있으며, 입력 폼이라 하더라도 `value` 속성을 사용하지 않으면 비제어 컴포넌트로 봄

## 7.1 React에서 폼을 다루기 위한 권장 방법

### 7.1.1 React에서 폼과 이벤트 정의하기

- `<form/>` 태그는 필수적으로 사용되는 것은 아니나 여러 곳에 흩어져서 두지 않고 공통 목적을 가진 `<input/>` 태그를 묶는 용도로 주로 사용함
- React에서는 `<form/>` 태그에 대해 아래의 이벤트를 지원

    - onSubmit : 폼 제출 시 이벤트 발생
    - onChange : 폼의 입력 요소에 대한 변경이 발생할 때 이벤트가 생성됨
    - onInput : `<textarea/>`, `<input/>`의 값이 변경될 때 발생하나, 이 이벤트를 사용하지 않는 것을 권장

        - React의 `onChange`는 값이 바뀌는 순간마다 발생하며, DOM의 값이 변경되고 포커스를 잃을 때 호출되는 HTML의 `on-change`와는 차이가 있음
        - HTML의 `on-input`도 값이 변경될 때마다 발생하는 이벤트로, React의 `onChange`와 유사한 측면이 있고 React의 onInput은 `on-input` 이벤트를 래핑한 것
        - 결국에 값이 변경될 때마다 호출된다는 것은 `onChange`, `onInput`이 유사한 측면이 있지만 React가 감싸서 만든 `onChange`를 쓰도록 권고

### 7.1.2 폼 요소 정의하기

#### a. 폼 요소의 종류와 대화형 속성

- HTML의 거의 대부분의 입력 영역을 `<input/>`, `<textarea/>`, `<select/>`, `<option/>`으로 구현 가능
- React는 원칙적으로 속성을 변경할 수 없으나, 사용자가 폼 요소와 상호작용하면서 속성을 변경하는 케이스이며, 이를 대화형 속성으로 구분함

    - value : `<input/>`, `<textarea/>`, `<select/>`에 적용
    - checked : `<input type="checkbox"/>`, `<input type="radio"/>`에 적용
    - selected : `<select/>`와 함께 `<option/>`을 사용할 때 적용

#### b. `<input/>`

- `type` 속성에 입력하는 값에 따라 여러 가지 방식의 입력 영역을 렌더링할 수 있음

    - text : 일반적인 텍스트 입력 영역
    - password : 보안을 위해 입력 내용이 가려진 텍스트 입력 영역
    - radio : 라디오 버튼, 라디오 버튼 그룹을 만들 때는 name 속성에 같은 값을 입력
    - checkbox : 체크박스 요소, 체크박스 그룹을 만들 때는 name 속성에 같은 값을 입력
    - button : 버튼 폼 요소

#### c. `<textarea/>`

- `innerHTML` 대신 `value` 속성을 사용하는 것을 권장

#### d. `<select/>` / `<option/>`

- React 차원에서 `multiple` 옵션을 사용하여 단일 / 다중 선택 모드를 지원
- `value`에 선택할 항목을 단일 값을 전달하거나 다중 선택을 위해 `multiple={true}` 옵션을 제공할 경우에는 배열 형태로 제공해야 함
- `multiple`로 다중 선택 기능을 지원할 경우, 이벤트 리스너로부터 선택된 대상인지 체크하고 추가 / 삭제하는 로직을 필요로 함

### 7.1.3 변경 감지하기

- 기본적으로 값이 변경되는 것을 알려면 `onChange` 이벤트 리스너를 등록하여 사용할 수 있음
- 이전에서 언급한 것처럼 `onChange`는 HTML의 `on-change`가 포커스를 잃을 경우에 발생하는 것과 다르게 데이터가 변경될 때마다 발생
- 태그의 유형이나 설정한 속성에 따라 `onChange`가 호출되는 시점이 달라지며, 읽는 값이 달라짐

    - `<input/>`, `<textarea/>`, `<select/>` : `value`가 변경될 때 `onChange`가 호출됨 => event.target.value / event.target.selected
    - `<input type="radio"/>`, `<input type="checkbox"/>` : `checked`가 변경될 때 `onChange`가 호출됨 => event.target.checked

### 7.1.4 대출 신청서의 계좌번호 영역 만들기

- 상태 변경 시, 가공하여 할당하거나 조건을 만족하지 않는 경우에는 상태를 변경하지 않는 것도 가능

## 7.2 폼을 다루는 다른 방법

### 7.2.0 개요

- 기본적으로는 제어 폼 요소를 다루는 것이 좋으나, 직접 값을 감지하고 상태를 갱신하는 추가 작업이 포함되므로 번거로움
- 서버에 간단히 전달할 목적으로 정적인 값을 사용하는 경우에는 비제어 컴포넌트를 사용해도 무방
- 비제어 컴포넌트를 사용하려면 제출할 때, `onClick`이나 `onSubmit`를 구현하여 값을 참조해서 전달할 수 있도록 구현이 필요
- 비제어 컴포넌트를 관리하는 방법은 크게 두 가지 방법이 있음

    - 제어 엘리먼트를 사용할 때처럼 상태는 갱신하지만, 상태를 `value`에 사용하지 않고 제출 시에만 사용
    - 변경을 감지하지 않는 방식

### 7.2.1 비제어 엘리먼트에서 변경 감지하기

- `<input/>`의 `value`를 설정하지 않고 상태만 변경하는 방식으로 값을 관리

### 7.2.2 비제어 엘리먼트에서 이벤트를 감지하지 않는 경우

- 폼을 제출할 때처럼 모든 값이 필요한 경우에 문제가 발생
- 변경을 감지하는 경우에는 변경 사항이 상태에 저장되나, 그렇지 않은 경우는 DOM에만 해당 정보가 남아있는 문제가 발생
- 이 경우에는 `ReactDOM.findDOMNode(component)`로 값을 직접 가져오는 방식을 사용할 수 있음

### 7.2.3 값에 참조로 접근하기

- 비제어 컴포넌트를 다룰 때에는 `refs`로 접근하여 값을 갖올 수 있으나, 안티 패턴임을 숙지하고 필요한 경우에만 사용할 것
- `render()` 메서드에서 전달하는 JSX에서 엘리먼트의 `ref` 속성에 카멜 표기법으로 전달

### 7.2.4 기본값 설정하기

- `defaultValue`라는 속성을 활용하여 입력 영역의 기본값을 채울 수 있음
- 실수로 `<input/>` 태그의 `value` 값을 하드 코딩할 경우, React가 읽기 전용으로 값을 받아오기 때문에 수정할 수 없음
- `defaultValue` / `value`는 둘 중에 하나만 할당 가능함
